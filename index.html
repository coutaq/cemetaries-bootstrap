<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cemeteries</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/custom.css">
</head>
<body style="background-color: #0C192F;">
<nav id="topbar" class="fixed-top navbar navbar-expand-lg navbar-dark" style="background-color: #05121B;">
        <a id="linkTop" class="navbar-brand" href="#" style="font-size: 2rem">
            <img src="assets/skeleton.gif" width="50rem" height="50rem" class="d-inline-block align-baseline" alt="">
            Bootstrap
        </a>
        <button id="hamburger"class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsible" aria-controls="collapsible" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse p-3 pl-2" id="collapsible">
            <div class="d-flex" style="width: 100%">
                <input id="searchBar" class="form-control h1 mx-auto ml-sm-auto" type="text" placeholder="Поиск" aria-label="Search">
            </div>
        </div>
</nav>

<div id="developer_note" class="d-flex flex-wrap p-2 bd-highlight flex-column flex-sm-row justify-content-center justify-content-sm-around align-middle" style=""></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script>

</script>
<script>
    $("#developer_note").css("margin-top", $("#topbar").height());
    $('#collapsible').on('shown.bs.collapse', function () {
        $("#developer_note").css("margin-top", $("#topbar").height());
    })
    $('#collapsible').on('hidden.bs.collapse', function () {
        $("#developer_note").css("margin-top", $("#topbar").height());
    })
    function scrollTop() {
        window.scrollTo({top: 0, behavior: 'smooth'});
    }
    $('#linkTop').click(function(){scrollTop(); return false; });
    let data = new Array();
    function loadQuestions() {
        $.getJSON('assets/cemetaries.json', function (json) {
            data = json.cemeteries;
        })
            .error(function() {
                console.log('error: JSON not loaded');
            })
            .done(function() {
                console.log( "JSON loaded!" );
                for (var i = 0; i < data.length; i++) {
                    var text =  $("#searchBar").text()
                    $("#developer_note").append(
                        "<div class=\"cards mx-auto mx-sm-auto mx-sm-4 m-4\" style=\"\">" +
                            "<div class=\"flex-column d-inline-flex justify-content-center bg-light shadow\" style=\"min-width: 15rem;\">" +
                                "<img src=\""+data[i].image+"\"class=\"card-img-top m-0\" style=\"height: 10rem;max-width: 20rem\">"+
                                "<div class=\"p-2 flex-fill flex-grow-1 bd-highlight\">"+data[i].name+"</div>" +
                                    "<div class=\"p-2 flex-fill flex-grow-1 bd-highlight mb-auto\">" +
                                      "<a href=\""+data[i].link+" \" class=\"btn btn-primary\" >Текст кнопки</a>" +
                                    "</div>" +
                            "</div>" +
                        "</div>");
                }
            });
    }
    loadQuestions()
    function filter(text, cemetery) {
        return cemetery.includes(text);
    }
    $(document).ready(function(){
        $("#searchBar").on("input", function(){
            $("#developer_note").html("");
            for (var i = 0; i < data.length; i++) {
                if(filter($(this).val().toLowerCase(), data[i].name.toLowerCase())){
                    $("#developer_note").append(
                        "<div class=\"cards bg-light m-4 shadow text-center\">" +
                            "<div class=\"flex-column d-inline-flex\" style=\"min-width: 100%;\">" +
                                "<img src=\""+data[i].image+"\"class=\"card-img-top m-0\">"+
                                "<div class=\"p-2 flex-fill flex-grow-1 bd-highlight\">"+data[i].name+"</div>" +
                                "<div class=\"p-2 flex-fill flex-grow-1 bd-highlight mb-auto\">" +
                                     "<a href=\""+data[i].link+" \" class=\"btn btn-primary\" >Текст кнопки</a>" +
                                "</div>" +
                            "</div>" +
                        "</div>");
                }
            }
        });
    });
</script>
</body>
</html>